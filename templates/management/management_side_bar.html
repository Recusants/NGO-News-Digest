<nav class="sidebar" id="sidebar">
    <!-- Dashboard -->
    <div class="nav-item {% if request.resolver_match.url_name == 'dashboard' or not request.resolver_match.url_name %}active{% endif %}" 
         onclick="window.location.href='{% url 'dashboard' %}'"
         title="Dashboard">
        <i class="fas fa-tachometer-alt"></i>
        <span class="nav-text">Dashboard</span>
    </div>
    
    <!-- Stories -->
    <div class="nav-item {% if 'story' in request.resolver_match.url_name %}active{% endif %}" 
         onclick="window.location.href='{% url 'story_list' %}'"
         title="All Stories">
        <i class="fas fa-file-alt"></i>
        <span class="nav-text">Stories</span>
    </div>

    <!-- Vacancies -->
    <div class="nav-item {% if 'vacancy' in request.resolver_match.url_name %}active{% endif %}" 
         onclick="window.location.href='{% url 'vacancy_list' %}'"
         title="Vacancies">
        <i class="fas fa-briefcase"></i>
        <span class="nav-text">Vacancies</span>
    </div>

    <!-- Notices -->
    <div class="nav-item {% if 'notice' in request.resolver_match.url_name %}active{% endif %}" 
         onclick="window.location.href='{% url 'notice_list' %}'"
         title="Notices">
        <i class="fas fa-bullhorn"></i>
        <span class="nav-text">Notices</span>
    </div>

    <!-- Categories -->
    <div class="nav-item {% if 'category' in request.resolver_match.url_name %}active{% endif %}" 
         onclick="window.location.href='{% url 'category_list' %}'"
         title="Categories">
        <i class="fas fa-tags"></i>
        <span class="nav-text">Categories</span>
    </div>

    <!-- User Management (Admin Only) -->
    {% if request.user.roles == 'admin' %}
    <div class="nav-item {% if 'user' in request.resolver_match.url_name %}active{% endif %}" 
         onclick="window.location.href='{% url 'user_list' %}'"
         title="User Management">
        <i class="fas fa-users-cog"></i>
        <span class="nav-text">Users</span>
    </div>
    {% endif %}
    
    <!-- Profile -->
    <div class="nav-item {% if 'user_profile' in request.resolver_match.url_name or 'team_profile_edit' in request.resolver_match.url_name %}active{% endif %}" 
         onclick="window.location.href='{% url 'user_profile' %}'"
         title="My Profile">
        <i class="fas fa-user"></i>
        <span class="nav-text">Profile</span>
    </div>
    
    <!-- Settings -->
    <div class="nav-item {% if request.resolver_match.url_name == 'settings' %}active{% endif %}" 
         onclick="window.location.href='#'"
         title="Settings">
        <i class="fas fa-cog"></i>
        <span class="nav-text">Settings</span>
    </div>
    
    <!-- Spacer -->
    <div style="flex: 1;"></div>
    
    <!-- Public Site -->
    <div class="nav-item" 
         onclick="window.open('/', '_blank')"
         title="Open Public Site">
        <i class="fas fa-external-link-alt"></i>
        <span class="nav-text">Public Site</span>
    </div>
    
    <!-- Logout -->
    {% if request.user.is_authenticated %}
    <div class="nav-item logout-item" id="logoutButton" title="Logout">
        <i class="fas fa-sign-out-alt"></i>
        <span class="nav-text">Logout</span>
    </div>
    {% endif %}
</nav>

<style>
    .logout-item {
        color: #ef4444;
    }
    
    .logout-item:hover {
        background: #fee2e2;
        color: #dc2626;
    }
    
    /* Add specific styling for admin-only user management item */
    .nav-item[title="User Management"] i {
        color: #3b82f6;
    }
    
    .nav-item[title="User Management"]:hover i {
        color: #1d4ed8;
    }
</style>

<script>
    // Setup logout button event listener
    document.addEventListener('DOMContentLoaded', function() {
        const logoutButton = document.getElementById('logoutButton');
        if (logoutButton) {
            logoutButton.addEventListener('click', function() {
                if (window.showConfirmAlert) {
                    window.showConfirmAlert(
                        'Confirm Logout',
                        'Are you sure you want to logout?',
                        'Yes, Logout'
                    ).then((result) => {
                        if (result.isConfirmed) {
                            // Use Django's built-in logout URL
                            window.location.href = '/accounts/logout/';
                            // Or if you have a custom logout view:
                            // window.location.href = '{% url "logout" %}';
                        }
                    });
                }
            });
        }
    });
</script>