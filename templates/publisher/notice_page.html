{% extends 'partials/base.html' %}
{% load static %}

{% block title %}NGO News Digest - Notice{% endblock %}

{% block content %}
    {% include 'partials/header.html' %}
    <main id="pageContent">
        <section id="notice-details" class="page-section">
            <div class="container section py-2">
                <a href="{% url 'notices_page' %}" class="btn btn-small mb-2" data-page="notices"><i class="fas fa-arrow-left"></i> Back to Notices</a>
                
                <div class="details-header">
                    <div class="badge badge-red" id="noticeCategory">{{ notice.category }}</div>
                    <h1 class="details-title" id="noticeTitle">{{ notice.overview }}</h1>
                    
                    <div class="details-meta">
                        <div><i class="fas fa-building"></i> <span id="noticeOrg">{{ notice.organization }}</span></div>
                        <div><i class="far fa-calendar"></i> Posted: <span id="noticeDate">{{ notice.publish_date }}</span></div>
                        <div><i class="far fa-calendar-alt"></i> Deadline: <span id="noticeDeadline">{{ notice.expiration_date }}</span></div>
                    </div>
                    
                    {% if notice.important %}
                    <div class="mt-2">
                        <span class="badge badge-orange">High Priority</span>
                    </div>
                    {% endif %}
                </div>
                
                <div class="two-column">
                    <div class="details-content" id="noticeContent">
                        {{ notice.description|safe }}
                    </div>
                    
                    <div class="details-sidebar">
                        <div class="sidebar-section">
                            <h3>Attachments</h3>
                            <div id="noticeAttachments">
                                {% for file in notice.attachments %}
                                    <div class="card mb-1" style="padding: 1rem; display: flex; align-items: center; justify-content: space-between;">
                                        <div>
                                            <i class="fas fa-file-pdf mr-2" style="color: #e53935;"></i>
                                            <span>{{ file.file_name }}</span>
                                        </div>
                                        <a href="{{ file.file }}" style="color: var(--primary);">Download</a>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                        
                        <div class="sidebar-section">
                            <h3>Contact Information</h3>
                            <div class="card" style="padding: 1rem;">
                                {{ notice.contact_details|safe }}
                            </div>
                        </div>
                        
                        <div class="sidebar-section">
                            <h3>Related Notices</h3>
                            <div id="relatedNotices">
                                {% for notice in related_notices %}
                                    <div class="mb-2">
                                        <a href="/notice_page/{{ notice.id }}" class="story-card-title" style="font-size: 1rem;">{{notice.headline}}</a>
                                        <div style="font-size: 0.8rem; color: var(--text-light);">{{notice.organization}} â€¢ {{notice.publish_date}}</div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    {% include 'partials/footer.html' %}
{% endblock %}
